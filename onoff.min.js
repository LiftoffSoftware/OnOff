/* ===================================================
 * onoff.js v1.0.0
 * https://github.com/LiftoffSoftware/OnOff
 * http://liftoffsoftware.com/
 * ===================================================
 * Copyright 2013 Liftoff Software Corporation.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
 var OnOff=function(){if(!(this instanceof OnOff))return new OnOff;var a=this;a.callbacks={},a.on=function(b,c,d,e){return b.split(/\s+/).forEach(function(b){var f=a.callbacks[b],g={callback:c,context:d,times:e};f||(f=a.callbacks[b]=[]),f.push(g)}),a},a.off=function(b,c,d){return b===undefined?(a.callbacks={},a):(b.split(/\s+/).forEach(function(b){var e=a.callbacks[b];!c&&e?delete a.callbacks[b]:c&&e&&e.forEach(function(e){e.callback==c&&(d===undefined||e.context==d)&&delete a.callbacks[b]})}),a)},a.once=function(b,c,d){return a.on(b,c,d,1),a},a.trigger=function(b){var c=Array.prototype.slice.call(arguments,1);return b.split(/\s+/).forEach(function(d){var e=a.callbacks[d];e&&e.forEach(function(d){d.times&&(d.times-=1,d.times==0&&a.off(b,d.callback,d.context)),d.callback.apply(d.context||this,c)})}),a}};typeof module!="undefined"&&"exports"in module&&(module.exports=OnOff);