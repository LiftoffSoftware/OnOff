var OnOff=function(){if(!(this instanceof OnOff))return new OnOff();var a=this;a.callbacks={};a.on=function(b,c,d,e){b.split(/\s+/).forEach(function(b){var f=a.callbacks[b],g={callback:c,context:d,times:e};if(!f)f=a.callbacks[b]=[];f.push(g);});return this;};a.off=function(b,c,d){if(b===undefined){a.callbacks={};return this;}b.split(/\s+/).forEach(function(b){var e=a.callbacks[b];if(!c&&e)delete a.callbacks[b];else if(c&&e)e.forEach(function(e){if(e.callback==c)if(d===undefined||e.context==d)delete a.callbacks[b];});});return this;};a.once=function(b,c,d){a.on(b,c,d,1);};a.trigger=function(b){var c=Array.prototype.slice.call(arguments,1);b.split(/\s+/).forEach(function(d){var e=a.callbacks[d];if(e)e.forEach(function(d){d.callback.apply(d.context||this,c);if(d.times){d.times-=1;if(d.times==0)a.off(b,d.callback,d.context);}});});return this;};};