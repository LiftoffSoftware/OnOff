var OnOff=function(){if(!(this instanceof OnOff))return new OnOff;var n=this,t=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};n._events={},n.on=function(t,e,r,o){return t.split(/\s+/).forEach(function(t){var s=n._events[t],f={callback:e,context:r,times:o};s||(s=n._events[t]=[]),s.push(f)}),n},n.off=function(e,r,o){var s,f,c;if(arguments.length){s=e?e.split(/\s+/):t(n._events);for(f in s){var i=s[f],a=n._events[i];if(a){var u=[];for(c in a)r&&""+a[c].callback==""+r?o&&a[c].context!=o?u.push(a[c]):null==o&&a[c].context&&u.push(a[c]):o&&a[c].context!=o&&u.push(a[c])}n._events[i]=u}}else n._events={};return n},n.once=function(t,e,r){return n.on(t,e,r,1),n},n.trigger=function(t){var e=Array.prototype.slice.call(arguments,1);return t.split(/\s+/).forEach(function(r){var o=n._events[r];o&&o.forEach(function(r){r.times&&(r.times-=1,0==r.times&&n.off(t,r.callback,r.context)),r.callback.apply(r.context||this,e)})}),n}};"undefined"!=typeof module&&"exports"in module&&(module.exports=OnOff);