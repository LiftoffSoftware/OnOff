var OnOff=function(){if(!(this instanceof OnOff))return new OnOff();var a=this,b=function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c))b.push(c);return b;};a._events={};a.on=function(b,c,d,e){b.split(/\s+/).forEach(function(b){var f=a._events[b],g={callback:c,context:d,times:e};if(!f)f=a._events[b]=[];f.push(g);});return this;};a.off=function(c,d,e){var f,g,h,i,j;if(!arguments.length)a._events={};else{f=c?c.split(/\s+/):b(a._events);for(i in f){var k=f[i],l=a._events[k];if(l){var m=[];for(j in l)if(d&&l[j].callback.toString()==d.toString()){if(e&&l[j].context!=e)m.push(l[j]);else if(e==null&&l[j].context)m.push(l[j]);}else if(e&&l[j].context!=e)m.push(l[j]);}a._events[k]=m;}}return this;};a.once=function(b,c,d){a.on(b,c,d,1);};a.trigger=function(b){var c=Array.prototype.slice.call(arguments,1);b.split(/\s+/).forEach(function(d){var e=a._events[d];if(e)e.forEach(function(d){d.callback.apply(d.context||this,c);if(d.times){d.times-=1;if(d.times==0)a.off(b,d.callback,d.context);}});});return this;};};